import React, { PureComponent } from 'react';
import { BackHandler } from 'react-native';
import {
  Container, Content, Icon, Fab
} from 'native-base';
import ReportScreen from './Screens/Report.screen';
import OrderStack from './Screens/Order/OrderStack'
import BillScreen from './Screens/Bill.screen'
import { TabBar } from 'react-native-tab-view';

import SvgUri from 'react-native-svg-uri'
import { createTabNavigator } from 'react-navigation';

import OrderManagementStack from './Screens/OrderManagement.Stack';
import LabSearchStack from './Screens/labSearchStack';
import{
  navigation_bar_home,
  navigation_bar_home_Y,
  navigation_bar_my_factors,
  navigation_bar_my_factors_Y,
  navigation_bar_new_order,
  navigation_bar_new_order_Y,
  navigation_bar_report,
  navigation_bar_report_Y,
  navigation_task,
  navigation_task_Y
} from './../../assets/img/svg/SvgXml'

const Tab=createTabNavigator(
  {
    report: { screen: ReportScreen,title:'گزارش گیری'},
    labSearch: { screen: LabSearchStack,title:'جستجوی لابراتور'},
    order: { screen: OrderStack,title:'سفارش جدید'},
    orderManagement: { screen: OrderManagementStack,title:'مدیریت سفارشات'},
    bill: { screen: BillScreen,title:'صورت حساب های من'},
  },
  {
    swipeEnabled:true,
    animationEnabled:true,
    tabBarPosition:'bottom',
    lazy:true,
    tabBarComponent:props=>{
      return(
      <TabBar
      {...props}
      style={{ height: 45, backgroundColor: '#7fbbd2', borderBottomColor: 'white', borderBottomWidth: 0 }}
      // labelStyle={styles.label}
      indicatorStyle={{backgroundColor:'#7fbbd2'}}
      tabStyle={{ borderBottomColor: 'white', borderBottomWidth: 0 }}
      // renderIcon={this._renderIcon}
      // onTabPress={this.goToIndex}
    />
    )},
    navigationOptions: ({ navigation }) => ({
      tabBarIcon: ({ focused, tintColor }) => {
        const { routeName } = navigation.state;
        let iconName;
        if (routeName === 'report') {
          iconName = `<?xml version="1.0" encoding="iso-8859-1"?><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 58.365 58.365" style="enable-background:new 0 0 58.365 58.365;" xml:space="preserve"><path d="M57.863,26.632l-8.681-8.061V5.365h-10v3.921L29.182,0L0.502,26.632c-0.404,0.376-0.428,1.009-0.052,1.414c0.375,0.404,1.008,0.427,1.414,0.052l3.319-3.082v33.349h16h16h16V25.015l3.319,3.082c0.192,0.179,0.437,0.267,0.681,0.267c0.269,0,0.536-0.107,0.732-0.319C58.291,27.641,58.267,27.008,57.863,26.632z M41.182,7.365h6v9.349l-6-5.571V7.365zM23.182,56.365V35.302c0-0.517,0.42-0.937,0.937-0.937h10.126c0.517,0,0.937,0.42,0.937,0.937v21.063H23.182z M51.182,56.365h-14V35.302c0-1.62-1.317-2.937-2.937-2.937H24.119c-1.62,0-2.937,1.317-2.937,2.937v21.063h-14V23.158l22-20.429l14.28,13.26l5.72,5.311v0l2,1.857V56.365z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>`;
        } else if (routeName === 'labSearch') {
          iconName = `<?xml version="1.0" encoding="iso-8859-1"?><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 52.966 52.966" style="enable-background:new 0 0 52.966 52.966;" xml:space="preserve"><path d="M51.704,51.273L36.845,35.82c3.79-3.801,6.138-9.041,6.138-14.82c0-11.58-9.42-21-21-21s-21,9.42-21,21s9.42,21,21,21c5.083,0,9.748-1.817,13.384-4.832l14.895,15.491c0.196,0.205,0.458,0.307,0.721,0.307c0.25,0,0.499-0.093,0.693-0.279C52.074,52.304,52.086,51.671,51.704,51.273z M21.983,40c-10.477,0-19-8.523-19-19s8.523-19,19-19s19,8.523,19,19S32.459,40,21.983,40z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>`;
        } else if (routeName === 'order') {
          iconName = `<?xml version="1.0" encoding="iso-8859-1"?><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512.001 512.001;" xml:space="preserve"><path style="fill:#E3F2FF;" d="M391.819,17.522c76.651,24.57,112.882,138.462,50.271,230.574c-55.471,81.601-30.561,137.002-62.001,211.664c-21.27,50.501-42.371,62.801-66.341-2.59c-19.57-53.351-18.03-141.172-58.031-140.883c-40.001,0.28-38.441,87.442-58.021,140.883c-23.79,64.881-44.941,53.421-66.351,2.59c-32.641-77.511-5.6-128.822-61.931-211.564C6.792,156.175,42.672,42.203,119.614,17.522c63.711-20.43,116.102,5.83,136.102,18.41C275.727,23.352,328.107-2.908,391.819,17.522z"/><polygon style="fill:#FEC459;" points="216.215,146.284 171.215,161.285 156.214,206.285 141.214,161.285 96.213,146.284 141.214,131.284 156.214,86.283 171.215,131.284 "/><path d="M385.968,46.993c-5.52,0-10,4.48-10,10s4.48,10,10,10c5.52,0,10-4.48,10-10S391.49,46.993,385.968,46.993z"/><path d="M395.123,7.999c-62.714-20.11-115.125,2.394-139.154,16.261C231.942,10.39,179.539-12.115,116.81,7.999C33.738,34.646-5.209,155.948,61.398,253.824c31.557,46.352,35.771,82.105,40.232,119.958c3.266,27.71,6.643,56.362,20.749,89.86c9.486,22.52,22.895,48.281,42.734,48.279c0.179,0,0.362-0.002,0.542-0.006c15.953-0.377,28.809-16.199,41.681-51.304c6.557-17.895,10.758-39.011,14.821-59.43c7.313-36.754,14.876-74.759,33.883-74.892c0.034,0,0.067,0,0.101,0c18.799,0,26.345,38.018,33.643,74.783c4.065,20.484,8.269,41.667,14.825,59.541c12.888,35.159,25.743,51.006,41.681,51.382c0.181,0.004,0.36,0.006,0.541,0.006c19.799,0,33.226-25.802,42.726-48.36c13.48-32.011,17.011-60.593,20.426-88.234c4.808-38.917,9.349-75.675,40.629-121.689l0,0C517.999,154.579,476.801,34.182,395.123,7.999z M434.07,242.474c-33.996,50.01-39.05,90.919-43.938,130.481c-3.397,27.497-6.606,53.469-19.009,82.922C356.407,490.816,347.873,492,346.794,492c-0.012,0-0.022,0-0.032,0c-0.385-0.009-9.586-0.655-23.375-38.274c-6.02-16.412-10.069-36.816-13.985-56.548c-4.396-22.15-8.548-43.073-15.392-59.404c-8.757-20.895-21.485-31.487-37.836-31.487c-0.091,0-0.184,0-0.275,0.001c-16.419,0.115-29.195,10.789-37.97,31.727c-6.841,16.322-10.992,37.181-15.385,59.263c-3.915,19.672-7.962,40.015-13.984,56.45c-13.764,37.538-22.987,38.184-23.373,38.193c-0.896,0.016-9.53-0.804-24.372-36.041c-13.007-30.889-16.073-56.899-19.318-84.438c-4.547-38.579-9.249-78.471-43.561-128.87C17.891,154.341,54.085,49.127,122.921,27.046c59.86-19.195,109.263,5.74,127.724,17.353c3.253,2.047,7.393,2.048,10.646,0.001c18.468-11.61,67.883-36.543,127.727-17.353C459.217,49.548,492.901,155.924,434.07,242.474z"/><path d="M410.384,75.112c-4.563,3.112-5.738,9.333-2.625,13.896c4.237,6.211,7.738,13.288,10.406,21.032c9.965,28.925,7.365,62.673-7.134,92.594c-2.409,4.97-0.332,10.951,4.638,13.36c4.971,2.409,10.952,0.332,13.36-4.638c16.788-34.643,19.72-73.945,8.045-107.83c-3.248-9.429-7.553-18.105-12.794-25.788C421.167,73.174,414.946,71.999,410.384,75.112z"/><path d="M219.629,136.797l-40.257-13.419l-13.419-40.257c-1.361-4.083-5.183-6.838-9.487-6.838s-8.125,2.754-9.487,6.838l-13.419,40.257l-40.257,13.419c-4.083,1.361-6.838,5.183-6.838,9.487s2.754,8.125,6.838,9.487l40.257,13.419l13.419,40.25c1.361,4.083,5.183,6.838,9.487,6.838s8.125-2.754,9.487-6.838l13.419-40.257l40.257-13.419c4.083-1.361,6.838-5.183,6.838-9.487S223.712,138.159,219.629,136.797z M168.303,151.797c-2.986,0.995-5.33,3.338-6.325,6.325l-5.513,16.54l-5.513-16.54c-0.995-2.986-3.338-5.33-6.325-6.325l-16.54-5.513l16.54-5.513c2.986-0.995,5.33-3.338,6.325-6.325l5.513-16.54l5.513,16.54c0.995,2.986,3.338,5.33,6.325,6.325l16.54,5.513L168.303,151.797z"/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>`;
        } else if (routeName === 'orderManagement') {
          iconName = `<?xml version="1.0" encoding="iso-8859-1"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M157.662,102.614c-4.427,0-8.017,3.589-8.017,8.017c0,9.725-7.912,17.637-17.637,17.637s-17.637-7.912-17.637-17.637s7.912-17.637,17.637-17.637c4.427,0,8.017-3.589,8.017-8.017s-3.589-8.017-8.017-8.017c-18.566,0-33.67,15.105-33.67,33.67s15.105,33.67,33.67,33.67s33.67-15.105,33.67-33.67C165.679,106.203,162.089,102.614,157.662,102.614z"/></g></g><g><g><path d="M157.662,196.676c-4.427,0-8.017,3.589-8.017,8.017c0,9.725-7.912,17.637-17.637,17.637s-17.637-7.912-17.637-17.637s7.912-17.637,17.637-17.637c4.427,0,8.017-3.589,8.017-8.017s-3.589-8.017-8.017-8.017c-18.566,0-33.67,15.105-33.67,33.67s15.105,33.67,33.67,33.67s33.67-15.105,33.67-33.67C165.679,200.266,162.089,196.676,157.662,196.676z"/></g></g><g><g><path d="M251.724,213.779h-59.858c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017h59.858c4.427,0,8.017-3.589,8.017-8.017S256.152,213.779,251.724,213.779z"/></g></g><g><g><path d="M251.724,179.574h-59.858c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017h59.858c4.427,0,8.017-3.589,8.017-8.017S256.152,179.574,251.724,179.574z"/></g></g><g><g><path d="M234.622,307.841h-42.756c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017h42.756c4.427,0,8.017-3.589,8.017-8.017S239.049,307.841,234.622,307.841z"/></g></g><g><g><path d="M251.724,273.637h-59.858c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017h59.858c4.427,0,8.017-3.589,8.017-8.017S256.152,273.637,251.724,273.637z"/></g></g><g><g><path d="M328.685,119.716H191.866c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017h136.818c4.427,0,8.017-3.589,8.017-8.017S333.112,119.716,328.685,119.716z"/></g></g><g><g><path d="M294.48,85.511H191.866c-4.427,0-8.017,3.589-8.017,8.017s3.589,8.017,8.017,8.017H294.48c4.427,0,8.017-3.589,8.017-8.017S298.908,85.511,294.48,85.511z"/></g></g><g><g><path d="M157.662,290.739c-4.427,0-8.017,3.589-8.017,8.017c0,9.725-7.912,17.637-17.637,17.637s-17.637-7.912-17.637-17.637s7.912-17.637,17.637-17.637c4.427,0,8.017-3.589,8.017-8.017s-3.589-8.017-8.017-8.017c-18.566,0-33.67,15.105-33.67,33.67s15.105,33.67,33.67,33.67s33.67-15.105,33.67-33.67C165.679,294.328,162.089,290.739,157.662,290.739z"/></g></g><g><g><path d="M362.889,0H72.15C58.3,0,47.031,11.268,47.031,25.119v359.148c0,13.851,11.268,25.119,25.119,25.119h145.37c4.427,0,8.017-3.589,8.017-8.017c0-4.427-3.589-8.017-8.017-8.017H72.15c-5.01,0-9.086-4.076-9.086-9.086V25.119c0-5.01,4.076-9.086,9.086-9.086h290.739c5.01,0,9.086,4.076,9.086,9.086v265.087c0,4.427,3.589,8.017,8.017,8.017c4.427,0,8.017-3.589,8.017-8.017V25.119C388.008,11.268,376.74,0,362.889,0z"/></g></g><g><g><path d="M438.578,325.094c-7.451-0.743-14.898,1.369-20.792,5.844c-4.695-7.878-12.701-13.467-21.964-14.395c-7.453-0.742-14.899,1.37-20.792,5.844c-4.695-7.878-12.701-13.467-21.964-14.395c-5.69-0.568-11.372,0.528-16.365,3.069V208.969c0-8.289-3.526-16.235-9.677-21.8c-6.145-5.56-14.426-8.274-22.721-7.444c-14.799,1.482-26.391,14.863-26.391,30.464v102.35l-23.566,23.566c-12.523,12.523-17.578,30.291-13.521,47.531l17.891,76.037c7.249,30.811,34.418,52.329,66.07,52.329h72.307c37.426,0,67.875-30.448,67.875-67.875v-88.567C464.969,339.957,453.377,326.576,438.578,325.094z M448.935,444.125c0,28.585-23.256,51.841-51.841,51.841h-72.307c-24.175,0-44.927-16.435-50.464-39.968l-17.891-76.037c-2.776-11.795,0.683-23.953,9.251-32.521l12.229-12.229v27.678c0,4.427,3.589,8.017,8.017,8.017s8.017-3.589,8.017-8.017V210.188c0-7.465,5.251-13.839,11.956-14.509c3.851-0.387,7.534,0.815,10.366,3.379c2.797,2.531,4.401,6.144,4.401,9.912v141.094c0,4.427,3.589,8.017,8.017,8.017s8.017-3.589,8.017-8.017v-12.827c0-3.768,1.603-7.381,4.401-9.912c2.834-2.564,6.515-3.767,10.366-3.379c6.704,0.671,11.956,7.045,11.956,14.51v20.157c0,4.427,3.589,8.017,8.017,8.017c4.427,0,8.017-3.589,8.017-8.017v-12.827c0-3.768,1.603-7.381,4.401-9.912c2.834-2.564,6.516-3.766,10.366-3.379c6.704,0.671,11.956,7.045,11.956,14.51v20.158c0,4.427,3.589,8.017,8.017,8.017c4.427,0,8.017-3.589,8.017-8.017v-12.827c0-3.768,1.603-7.381,4.401-9.912c2.834-2.563,6.513-3.767,10.366-3.378c6.704,0.67,11.956,7.044,11.956,14.509V444.125z"/></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>`;
        } else if (routeName === 'bill') {
          iconName = `<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 491.695 491.695" style="enable-background:new 0 0 491.695 491.695;" xml:space="preserve"><g><path d="M436.714,0H149.471c-16.438,0-29.812,13.374-29.812,29.812v66.714c-54.49,15.594-94.489,65.857-94.489,125.288c0,59.431,39.998,109.694,94.489,125.288v114.783c0,16.438,13.374,29.812,29.812,29.812h234.733c2.785,0,5.455-1.106,7.425-3.075l71.821-71.822c1.969-1.969,3.075-4.64,3.075-7.425V29.812C466.525,13.374,453.152,0,436.714,0z M149.471,21h287.243c4.858,0,8.811,3.953,8.811,8.812v31.689H140.659V29.812C140.659,24.953,144.612,21,149.471,21z M46.17,221.813c0-60.263,49.027-109.29,109.29-109.29c60.263,0,109.29,49.027,109.29,109.29s-49.027,109.291-109.29,109.291C95.197,331.104,46.17,282.076,46.17,221.813z M140.659,461.884V351.258c4.86,0.552,9.797,0.846,14.802,0.846c39.135,0,74.292-17.347,98.195-44.752h64.336c5.799,0,10.5-4.701,10.5-10.5s-4.701-10.5-10.5-10.5h-49.381c9.133-15.95,14.984-34.005,16.644-53.242h32.736c5.799,0,10.5-4.701,10.5-10.5c0-5.799-4.701-10.5-10.5-10.5h-32.603c-1.42-19.194-7.02-37.242-15.886-53.241h48.488c5.799,0,10.5-4.701,10.5-10.5c0-5.799-4.701-10.5-10.5-10.5h-62.974c-23.918-28.323-59.67-46.347-99.558-46.347c-5.005,0-9.942,0.294-14.802,0.846v-9.867h304.866v316.372h-42.009c-16.439,0-29.811,13.374-29.811,29.811v42.011H149.471C144.612,470.695,140.659,466.743,140.659,461.884z M394.705,455.845v-27.16c0-4.859,3.953-8.811,8.811-8.811h27.16L394.705,455.845z"/><path d="M359.246,158.869h34.87c5.799,0,10.5-4.701,10.5-10.5c0-5.799-4.701-10.5-10.5-10.5h-34.87c-5.799,0-10.5,4.701-10.5,10.5C348.746,154.168,353.447,158.869,359.246,158.869z"/><path d="M359.246,233.11h34.87c5.799,0,10.5-4.701,10.5-10.5c0-5.799-4.701-10.5-10.5-10.5h-34.87c-5.799,0-10.5,4.701-10.5,10.5C348.746,228.409,353.447,233.11,359.246,233.11z"/><path d="M359.246,307.352h34.87c5.799,0,10.5-4.701,10.5-10.5s-4.701-10.5-10.5-10.5h-34.87c-5.799,0-10.5,4.701-10.5,10.5S353.447,307.352,359.246,307.352z"/><path d="M394.116,381.593c5.799,0,10.5-4.701,10.5-10.5s-4.701-10.5-10.5-10.5h-98.225c-5.799,0-10.5,4.701-10.5,10.5s4.701,10.5,10.5,10.5H394.116z"/><path d="M236.982,168.845l-12.81-12.81c-3.45-3.449-8.036-5.349-12.915-5.349s-9.465,1.9-12.915,5.349l-67.19,67.19l-18.573-18.573c-3.449-3.448-8.036-5.348-12.914-5.348c-4.878,0-9.465,1.9-12.914,5.349l-12.813,12.812c-7.12,7.121-7.12,18.708,0.001,25.829l44.297,44.296c3.45,3.451,8.037,5.351,12.916,5.351c0,0,0.001,0,0.001,0c4.878,0,9.465-1.9,12.913-5.349l92.917-92.917C244.103,187.554,244.103,175.966,236.982,168.845z M131.151,270.807l-40.429-40.428l8.942-8.942l24.062,24.062c4.101,4.101,10.749,4.101,14.85,0l72.681-72.681l8.942,8.942L131.151,270.807z"/></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>`;
        }
        // You can return any component that you like here! We usually use an
        // icon component from react-native-vector-icons
        return <SvgUri
        style={{ justifyContent: 'center', alignSelf: 'center' }}
        width="25"
        height="25"
        svgXmlData={iconName}
        // source={require('../../assets/img/svg/report.svg')}
      />;
      },
    }),
    tabBarOptions: {
      activeTintColor: '#fff',
      activeBackgroundColor:'red',
      inactiveTintColor: 'gray',
    },
  }
)
class DentistHomeScreen extends PureComponent {
  constructor(props) {
    super(props);

    this.state = {
    };
  }


  componentDidMount() {
    BackHandler.addEventListener('hardwareBackPress', this.handleBackPress);
  }


  componentWillUnmount() {
    BackHandler.removeEventListener('hardwareBackPress', this.handleBackPress);
  }
  handleBackPress = () => {
    this.props.navigation.navigate('DashboardScreen');
    return true;
  }


  render() {
    return (
      <Container>
      {/* <ProgressDialog
              visible={this.props.orderLoading||this.props.searchLoading||this.props.billLoading||this.props.dashLoading}
              title=""
              message="در حال بارگزاری ..."
            /> */}
        <Content contentContainerStyle={{ flex: 1 }}>
          
          <Tab screenProps={this.props.navigation.getParam('index')}/>
        </Content>
        <Fab
          style={{ backgroundColor: '#e7be00', position: 'absolute', bottom: 40, width: 40, height: 40, right: 3 }}
          position="bottomRight"
          onPress={() => this.props.navigation.navigate('DashboardScreen')}>
          <Icon name="ios-home-outline" />
        </Fab>
      </Container>
    
    );
  }
}

export default DentistHomeScreen
